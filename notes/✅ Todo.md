- ğŸ shooting
  - âœ… system has laser beams
  - âœ… firing adds a beam to the system
  - âœ… draw lasers when firing
  - âœ… characters have health
  - âœ… check for ship/laser collisions
  - âœ… reduce health on hit
  - âœ… remove character on destruction
  - âœ… disallow shooting oneself

- ğŸ system scale
  - âœ… never scale positions & sizes in the data (Actor &c.)
  - âœ… scale positions & sizes when drawing
  - âœ… apply scale to bodies
  - âœ… apply inverse scale to ships?
  - âœ… draw things in km instead of m
  - âœ… actor positions & velocities are defined in terms of km & km/s

- ğŸ jumping
  - âœ… add a jump control/action
  - âœ… turn to face target
  - âœ… accelerate in direction of target
  - estimate time to target
  - face projected location of target modulo estimated time
  - âœ… when going fast enough, jump
  - stretch intervening space
  - âœ… stop when near the target
  - slow down on other side
  - enter orbit around bodies

- ğŸ npc spawning
  - notice when the player is approaching a body
  - spawn in NPCs
  - denser probability cloud near bodies, sparser farther away
  - do not spawn inside of bodies
  - not near the sun?
  - spawn outside of radar range
  - spawn *behind* bodies (â€œoutside of radar rangeâ€ once radar occlusion works)

- ğŸ background physics
  - âœ… did this, apparently didnâ€™t list it here

- ğŸ› Architecture
  - Draw into a framebuffer on a background thread
  - âœ… Process events on the main thread
  - âœ… Do physics in background thread
  - âœ… Do AI in background thread
  - Drop-in-drop-out co-op multiplayer
  - peer to peer networking?
  - sort into quadtrees for distance bucketing?
  - donâ€™t issue drawing commands for things offscreen
  - âœ… update labels less often
  - âœ… do less matrix multiplication on the CPU
    - âœ… share more
    - âœ… offload more to GPU
  - âœ… set uniforms less often
  - precompute direction & distance between player & targets?
  - ğŸš« use foreign ptrs to finalize allocations?
    - this isnâ€™t how they workâ€”you need a `FunPtr`, which you can only get from foreign code
    - `Foreign.Concurrent` allows you to associate arbitrary `IO` actions with a `ForeignPtr` as its finalizer, but these are run on another thread, and so further coordination is required to do something on the main thread
  - loading and saving
  - âœ… reader/state split of System leads to drawing/aiming in the wrong places
  - âœ… store actors in system
  - âœ… instantaneous representation of entire system
  - âœ… update radar data in arrays instead of uniforms
  - âœ… sort & filter the view on the solar system for radar, targetting, AI, etc. to limit range
  - share a buffer between ship, radar, & body drawing
    - âœ… radar
    - âœ… target
    - ship
    - body
  - higher-level way of writing shaders, buffers, arrays, and programs
    - write shader as haskell program taking inputs and producing pixels
    - take care of copying data into buffers, setting up arrays, etc.
  - use a fixed time interval for physics integration
  - account for floating point error by sectoring the solar system
  - draw glyphs more efficiently
  - systems shouldnâ€™t require a player
    - filtered systems may not have one
    - network games may have >1
  - the player shouldnâ€™t be special in the `System`
  - compose units and vectors
  - âœ… zoom and scale have each otherâ€™s units. scale determines the size of the solar system bodies, relating lengths of space distance to lengths of pixels, zoom is a multiplier on that to show how much we get on screen at a time and can be applied before or after scale with the same effect
  - process input multiple times per frame on the main thread for fine control
  - share glyph buffer between multiple text buffers for drawing static text labels, e.g. planet names, cheaply
    - when to purge & redraw cached static text?
  - DSL for scripting game events
    - metalanguage for adding/removing things to the system
  - sometimes the integration thread doesnâ€™t actually quit

- ğŸ› Controls
  - targetting as a zipper on a list of trees â€” star/planets/moons, ships, etc

- ğŸ–¥ UI
  - âœ… radar falloff for range/whatever
  - radar ring N/E/S/W?
  - IFF
  - set â€œdefaultâ€ zoom factor?
  - âœ… select target
  - âœ… display range to target
  - âœ… fps counter
  - show the throttle
  - targeting reticle
  - indicators for:
    - throttle
    - heading
      - spike from radar ring
    - âœ… target name/properties
      - spike from radar ring
    - âœ… thrusters (little orange glow?)
      - glow at the back of the ship only
  - zoom out (scroll wheel) for map
    - solar system
    - your radar
    - friendsâ€™ radar (only when in line of sight?)
    - select target/region for jumping?
  - âœ… filter system by power rather than range
    - âœ… always include first- and second-order major bodies
    - âœ… higher radar power includes more distant ships & minor bodies
    - âœ… larger objects show up more easily
    - radar cross-section rather than just size
    - laser power, not radar power, determines its range
    - radar bounces
  - âœ… visual radar occlusion
  - targetting radar occlusion
  - âœ… show distances in most-significant-first scientific notation, e.g. 10â´Â·7.6km
  - place the target label on the vector toward the target
  - split the target label into distance & name
  - label planets
  - label ships

- ğŸ¤¦ğŸ»â€â™€ï¸ Features
  - âœ… â€œwarpâ€
  - âœ… target ships
  - asteroids
  - âœ… enemies!!!
  - procedural characters
  - energy weapons
  - missiles
  - kinetic weapons
  - mining
  - âœ… Jupiterâ€™s moons
  - planetary rings
  - âœ… planetary tilt
  - procedural ships
  - procedural weapons
  - space stations
  - save/load
  - repair drones
  - attack drones
  - radar drones
  - decoy drones
  - mine drones
  - missile drones
  - jamming
  - radar ghosts
  - radar spoofing
  - doppler effect
  - spawn characters in near planets
  - spawn player in near planets

- ğŸŒ Graphics
  - shade planets
  - tesselate circles/spheres?
  - trace orbits
  - âœ… why does the starfield look so much less interesting than the original shader?
  - perspective
  - iso angle?
  - lasers cast light
  - âœ… thrusters cast light
  - animations/manoeuvres (e.g. barrel roll when killing enemy fighters)
  - scale ships very subtly with velocity?
  - use mat3x4 instead of mat4 to avoid copying quite so much
  - define units for colours

- ğŸ¤– AI
  - Target position/orientations
  - many more ships
  - ephemeral ships

- ğŸ Bugs
  - âœ… Label descender length affects positioning
  - âœ… Major/minor bodiesâ€™ codes can collide
  - âœ… Glyph metrics should be integral
  - âœ… Fullscreen is really low frame rate but doesnâ€™t measure as such?
    - This appears to have been fixed, probably by ~~`-fexternal-interpreter`~~ using the threaded RTS
  - âœ… Window vs. device coords is extremely confusing
  - âœ… drawing is slow
  - âœ… units are easy to mix up
  - âœ… system scale is hard to apply consistently
  - âœ… system scale has to be undone for many calculations
  - âœ… magnitudes are half what they should be
  - gravity is weirdly, stupidly weak; 46x?
  - âœ… the starfield looks pretty terrible; choppy/pixelated, especially as you get further from the sun; FP precision
  - âœ… radar blip size is wrong when close to large bodies
  - âœ… ships are visible on system radar at their unscaled size
  - âœ… the mouse cursor should not be visible unless we can actually click on things
  - switching to another app and back on macOS improves framerate?
  - the starfield is really slow to draw
  - the starfield is distractingly twinkly when moving at low velocities
  - thereâ€™s no way to select which screen you want to draw on

- â¤´ï¸ Extract
  - âœ… fused-effects-profile
  - Control.Carrier.Empty.Church
  - Control.Carrier.Empty.CPS
  - execEmpty
    execEmpty :: Functor m => EmptyC m a -> m Bool
    execEmpty = fmap isJust . runEmpty
  - evalEmpty
    evalEmpty :: Functor m => EmptyC m a -> m ()
    evalEmpty = void . runEmpty
  - Control.Effect.Labelled
  - locally

- ğŸ§¹ Housekeeping
  - âœ… move Starlight.Draw.*.Shader into their parent modules
  - âœ… rename drawShip &c to draw
  - âœ… lift position_, velocity_, etc. into HasActor, classy-lensesâ€“style
  - split module hierarchies into separate packages
  - ğŸš« make `Colour` monomorphic
    - it seems useful to be able to do e.g. `Colour Word8` over the network
    - tho maybe we could just pack into `Word32` instead?
  - âœ… derive instances via `Fields` instead of using `UndecidableInstances`
  - âœ… classy-lensesâ€“style `HasColour` class

- â“ Questions
  - how should friendly fire be handled?
  - should there be ephemeral NPCs or should we model them all?

- ğŸ“ tests
  - test unit conversions for multiplicities
  - test linear stuff
  - test physics stuff
